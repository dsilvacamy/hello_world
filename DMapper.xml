<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ge.treasury.myfunding.mapper.myfunding.DealMapper">
  <resultMap id="BaseResultMap" type="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
      
DEAL_ID                NOT NULL NUMBER(9)     
DEAL_DISPLAY                    VARCHAR2(250) 
DEAL_NAME              NOT NULL VARCHAR2(250) 
DEAL_STATUS_CODE       NOT NULL VARCHAR2(30)  
DEAL_RATIONALE                  VARCHAR2(500) 

DAY_TYPE                        VARCHAR2(20)  
DEAL_PRIORITY_CODE              VARCHAR2(30) 
RESPONSIBLE_TEAM_CODE           VARCHAR2(30)  



DEAL_REQUESTER                  VARCHAR2(250) 
 
PRIORITY_COMMENT                VARCHAR2(250) 

AFFIRM_DUE_DATE                 DATE          
DEAL_REQUEST_TIMESTAMP          TIMESTAMP(6)  
BUS_TAX_CONTACT                 VARCHAR2(250) 
BUS_CONTROLLER_CONTACT          VARCHAR2(250) 
CREATE_TIMESTAMP       NOT NULL TIMESTAMP(6)  
CREATE_USER            NOT NULL VARCHAR2(50)  
LAST_UPDATE_TIMESTAMP  NOT NULL TIMESTAMP(6)  
LAST_UPDATE_USER       NOT NULL VARCHAR2(50)  
    -->
    <id column="DEAL_ID" jdbcType="DECIMAL" property="dealId" />
    <result column="DEAL_DISPLAY" jdbcType="VARCHAR" property="dealDisplay" />
    <result column="DEAL_NAME" jdbcType="VARCHAR" property="dealName" />
    <result column="DEAL_STATUS_CODE" jdbcType="VARCHAR" property="dealStatusCode" />
    <result column="DAY_TYPE" jdbcType="VARCHAR" property="dayCode" />
    <result column="DEAL_REQUESTER" jdbcType="VARCHAR" property="dealRequester" />

    <result column="DEAL_PRIORITY_CODE" jdbcType="VARCHAR" property="dealPriority" />
    <result column="PRIORITY_COMMENT" jdbcType="VARCHAR" property="priorityComment" />
    <result column="RESPONSIBLE_TEAM_CODE" jdbcType="VARCHAR" property="responsibleTeam" />
    <result column="AFFIRM_DUE_DATE" jdbcType="TIMESTAMP" property="affirmDueDate" />
    <result column="BUS_TAX_CONTACT" jdbcType="VARCHAR" property="busTaxContact" />
    <result column="BUS_CONTROLLER_CONTACT" jdbcType="VARCHAR" property="busControllerContact" />
    <result column="CREATE_TIMESTAMP" jdbcType="TIMESTAMP" property="createTimestamp" />
    <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
    <result column="DEAL_REQUEST_TIMESTAMP" jdbcType="TIMESTAMP" property="dealRequestTimestamp" />
    <result column="LAST_UPDATE_TIMESTAMP" jdbcType="TIMESTAMP" property="lastUpdateTimestamp" />
    <result column="LAST_UPDATE_USER" jdbcType="VARCHAR" property="lastUpdateUser" />
    <result column="DEAL_RATIONALE" jdbcType="VARCHAR" property="dealRationale" />

    <result column="USD_EQUIVALENT_AMOUNT" jdbcType="DECIMAL" property="usdEquivalentAmount" />
    <result column="MDM_BUSINESS_TYPE" jdbcType="VARCHAR" property="mdmBusinessType" />

    <collection property="transactions" column="DEAL_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Transaction" 
    resultMap="com.ge.treasury.myfunding.mapper.myfunding.TransactionMapper.BaseResultMap" javaType="Arraylist">
    </collection>  
    
    <collection property="documents" column="DO_DOCUMENT_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Document" 
      resultMap="com.ge.treasury.myfunding.mapper.myfunding.DocumentMapper.BaseResultMapDealDoc" javaType="Arraylist">
    </collection>
      
  
    <collection property="teams" column="TEAM_DEAL_TEAM_ACTOR_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Team" 
      resultMap="com.ge.treasury.myfunding.mapper.myfunding.TeamMapper.BaseResultMapTeamForDeal" javaType="Arraylist">
    </collection>
 
  </resultMap>
  <resultMap id="DealDetailsResultMap" type="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <id column="DEAL_ID" jdbcType="DECIMAL" property="dealId" />
    <result column="DEAL_DISPLAY" jdbcType="VARCHAR" property="dealDisplay" />
    <result column="DEAL_NAME" jdbcType="VARCHAR" property="dealName" />
    <result column="DEAL_STATUS_CODE" jdbcType="VARCHAR" property="dealStatusCode" />
    <result column="DAY_TYPE" jdbcType="VARCHAR" property="dayCode" />
    <result column="DEAL_REQUESTER" jdbcType="VARCHAR" property="dealRequester" />
    <result column="DEAL_PRIORITY_CODE" jdbcType="VARCHAR" property="dealPriority" />
    <result column="PRIORITY_COMMENT" jdbcType="VARCHAR" property="priorityComment" />
    <result column="RESPONSIBLE_TEAM_CODE" jdbcType="VARCHAR" property="responsibleTeam" />
    <result column="AFFIRM_DUE_DATE" jdbcType="TIMESTAMP" property="affirmDueDate" />
    <result column="BUS_TAX_CONTACT" jdbcType="VARCHAR" property="busTaxContact" />
    <result column="BUS_CONTROLLER_CONTACT" jdbcType="VARCHAR" property="busControllerContact" />
    <result column="CREATE_TIMESTAMP" jdbcType="TIMESTAMP" property="createTimestamp" />
    <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
    <result column="DEAL_REQUEST_TIMESTAMP" jdbcType="TIMESTAMP" property="dealRequestTimestamp" />
    <result column="LAST_UPDATE_TIMESTAMP" jdbcType="TIMESTAMP" property="lastUpdateTimestamp" />
    <result column="LAST_UPDATE_USER" jdbcType="VARCHAR" property="lastUpdateUser" />
    <result column="DEAL_RATIONALE" jdbcType="VARCHAR" property="dealRationale" />

    <result column="USD_EQUIVALENT_AMOUNT" jdbcType="DECIMAL" property="usdEquivalentAmount" />
    <result column="MDM_BUSINESS_TYPE" jdbcType="VARCHAR" property="mdmBusinessType" />

    <collection property="transactions" column="T_DEAL_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Transaction" 
    resultMap="com.ge.treasury.myfunding.mapper.myfunding.TransactionMapper.TransactionDetailsResultMap" javaType="Arraylist">
    </collection>  
    
    <collection property="documents" column="DO_DOCUMENT_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Document" 
      resultMap="com.ge.treasury.myfunding.mapper.myfunding.DocumentMapper.BaseResultMapDealDoc" javaType="Arraylist">
    </collection>
      
  
    <collection property="teams" column="TEAM_DEAL_TEAM_ACTOR_ID" ofType="com.ge.treasury.myfunding.domain.myfunding.Team" 
      resultMap="com.ge.treasury.myfunding.mapper.myfunding.TeamMapper.BaseResultMapTeamForDeal" javaType="Arraylist">
    </collection>
 
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    DEAL_ID, DEAL_DISPLAY, DEAL_NAME, DEAL_STATUS_CODE, DAY_TYPE, DEAL_REQUESTER, 
    DEAL_PRIORITY_CODE, PRIORITY_COMMENT, RESPONSIBLE_TEAM_CODE, AFFIRM_DUE_DATE, BUS_TAX_CONTACT, 
    BUS_CONTROLLER_CONTACT, CREATE_TIMESTAMP, CREATE_USER, DEAL_REQUEST_TIMESTAMP, LAST_UPDATE_TIMESTAMP, 
    LAST_UPDATE_USER, DEAL_RATIONALE,
    USD_EQUIVALENT_AMOUNT, MDM_BUSINESS_TYPE
  </sql>
  <select id="selectByExample" parameterType="com.ge.treasury.myfunding.domain.myfunding.DealExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from MYFUNDING.T_MYFUND_DEAL_REQUEST
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from MYFUNDING.T_MYFUND_DEAL_REQUEST
    where DEAL_ID = #{dealId,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    delete from MYFUNDING.T_MYFUND_DEAL_REQUEST
    where DEAL_ID = #{dealId,jdbcType=DECIMAL}
  </delete>
  <delete id="deleteByExample" parameterType="com.ge.treasury.myfunding.domain.myfunding.DealExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    delete from MYFUNDING.T_MYFUND_DEAL_REQUEST
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if> 
  </delete>
   <select id="getDealId" resultType="int">
      SELECT MYFUNDING.SEQ_DEAL_ID.nextval FROM dual
    </select>
  <insert id="insert" parameterType="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
<!-- <selectKey keyProperty="dealId" keyColumn="DEAL_ID" order="BEFORE" resultType="int">
      SELECT MYFUNDING.SEQ_DEAL_ID.nextval FROM dual
    </selectKey> --> 
    insert into MYFUNDING.T_MYFUND_DEAL_REQUEST (DEAL_ID,DEAL_DISPLAY, DEAL_NAME, DEAL_STATUS_CODE, 
      DAY_TYPE, DEAL_REQUESTER,  
      DEAL_PRIORITY_CODE, PRIORITY_COMMENT, RESPONSIBLE_TEAM_CODE, 
      AFFIRM_DUE_DATE, BUS_TAX_CONTACT, BUS_CONTROLLER_CONTACT, 
      CREATE_TIMESTAMP, CREATE_USER, DEAL_REQUEST_TIMESTAMP, 
      LAST_UPDATE_TIMESTAMP, LAST_UPDATE_USER, 
      DEAL_RATIONALE, USD_EQUIVALENT_AMOUNT, MDM_BUSINESS_TYPE)
    values (#{dealId,jdbcType=DECIMAL},#{dealDisplay,jdbcType=VARCHAR}, #{dealName,jdbcType=VARCHAR}, #{dealStatusCode,jdbcType=VARCHAR}, 
      #{dayCode,jdbcType=VARCHAR}, #{dealRequester,jdbcType=VARCHAR},
      #{dealPriority,jdbcType=VARCHAR}, #{priorityComment,jdbcType=VARCHAR}, #{responsibleTeam,jdbcType=VARCHAR}, 
      #{affirmDueDate,jdbcType=TIMESTAMP}, #{busTaxContact,jdbcType=VARCHAR}, #{busControllerContact,jdbcType=VARCHAR}, 
      #{createTimestamp,jdbcType=TIMESTAMP}, #{createUser,jdbcType=VARCHAR}, #{dealRequestTimestamp,jdbcType=TIMESTAMP}, 
      #{lastUpdateTimestamp,jdbcType=TIMESTAMP}, #{lastUpdateUser,jdbcType=VARCHAR}, 
      #{dealRationale,jdbcType=VARCHAR},
      #{usdEquivalentAmount,jdbcType=DECIMAL}, #{mdmBusinessType,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    <selectKey keyProperty="dealId" order="BEFORE" resultType="java.lang.Integer">
      SELECT MYFUNDING.SEQ_DEAL_ID.nextval FROM dual
    </selectKey>
    insert into MYFUNDING.T_MYFUND_DEAL_REQUEST
    <trim prefix="(" suffix=")" suffixOverrides=",">
      DEAL_ID,
      <if test="dealDisplay != null">
        DEAL_DISPLAY,
      </if>
      <if test="dealName != null">
        DEAL_NAME,
      </if>
      <if test="dealStatusCode != null">
        DEAL_STATUS_CODE,
      </if>
      <if test="dayCode != null">
        DAY_TYPE,
      </if>
      <if test="dealRequester != null">
        DEAL_REQUESTER,
      </if>
      
      <if test="dealPriority != null">
        DEAL_PRIORITY_CODE,
      </if>
      <if test="priorityComment != null">
        PRIORITY_COMMENT,
      </if>
      <if test="responsibleTeam != null">
        RESPONSIBLE_TEAM_CODE,
      </if>
      <if test="affirmDueDate != null">
        AFFIRM_DUE_DATE,
      </if>
      <if test="busTaxContact != null">
        BUS_TAX_CONTACT,
      </if>
      <if test="busControllerContact != null">
        BUS_CONTROLLER_CONTACT,
      </if>
      <if test="createTimestamp != null">
        CREATE_TIMESTAMP,
      </if>
      <if test="createUser != null">
        CREATE_USER,
      </if>
      <if test="dealRequestTimestamp != null">
        DEAL_REQUEST_TIMESTAMP,
      </if>
      <if test="lastUpdateTimestamp != null">
        LAST_UPDATE_TIMESTAMP,
      </if>
      <if test="lastUpdateUser != null">
        LAST_UPDATE_USER,
      </if>
      <if test="dealRationale != null">
        DEAL_RATIONALE,
      </if>

      <if test="usdEquivalentAmount != null">
        USD_EQUIVALENT_AMOUNT,
      </if>
      <if test="mdmBusinessType != null">
        MDM_BUSINESS_TYPE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
    	#{dealId,jdbcType=DECIMAL},
      <if test="dealDisplay != null">
        #{dealDisplay,jdbcType=VARCHAR},
      </if>
      <if test="dealName != null">
        #{dealName,jdbcType=VARCHAR},
      </if>
      <if test="dealStatusCode != null">
        #{dealStatusCode,jdbcType=VARCHAR},
      </if>
      <if test="dayCode != null">
        #{dayCode,jdbcType=VARCHAR},
      </if>
      <if test="dealRequester != null">
        #{dealRequester,jdbcType=VARCHAR},
      </if>
     
      <if test="dealPriority != null">
        #{dealPriority,jdbcType=VARCHAR},
      </if>
      <if test="priorityComment != null">
        #{priorityComment,jdbcType=VARCHAR},
      </if>
      <if test="responsibleTeam != null">
        #{responsibleTeam,jdbcType=VARCHAR},
      </if>
      <if test="affirmDueDate != null">
        #{affirmDueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="busTaxContact != null">
        #{busTaxContact,jdbcType=VARCHAR},
      </if>
      <if test="busControllerContact != null">
        #{busControllerContact,jdbcType=VARCHAR},
      </if>
      <if test="createTimestamp != null">
        #{createTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="createUser != null">
        #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="dealRequestTimestamp != null">
        #{dealRequestTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateTimestamp != null">
        #{lastUpdateTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateUser != null">
        #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="dealRationale != null">
        #{dealRationale,jdbcType=VARCHAR},
      </if>

      <if test="usdEquivalentAmount != null">
        #{usdEquivalentAmount,jdbcType=DECIMAL},
      </if>
      <if test="mdmBusinessType != null">
        #{mdmBusinessType,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.ge.treasury.myfunding.domain.myfunding.DealExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    select count(*) from MYFUNDING.T_MYFUND_DEAL_REQUEST
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    update MYFUNDING.T_MYFUND_DEAL_REQUEST
    <set>
      <if test="record.dealId != null">
        DEAL_ID = #{record.dealId,jdbcType=DECIMAL},
      </if>
      <if test="record.dealDisplay != null">
        DEAL_DISPLAY = #{record.dealDisplay,jdbcType=VARCHAR},
      </if>
      <if test="record.dealName != null">
        DEAL_NAME = #{record.dealName,jdbcType=VARCHAR},
      </if>
      <if test="record.dealStatusCode != null">
        DEAL_STATUS_CODE = #{record.dealStatusCode,jdbcType=VARCHAR},
      </if>
      <if test="record.dayCode != null">
        DAY_TYPE = #{record.dayCode,jdbcType=VARCHAR},
      </if>
      <if test="record.dealRequester != null">
        DEAL_REQUESTER = #{record.dealRequester,jdbcType=VARCHAR},
      </if>
      
      <if test="record.dealPriority != null">
        DEAL_PRIORITY_CODE = #{record.dealPriority,jdbcType=VARCHAR},
      </if>
      <if test="record.priorityComment != null">
        PRIORITY_COMMENT = #{record.priorityComment,jdbcType=VARCHAR},
      </if>
      <if test="record.responsibleTeam != null">
        RESPONSIBLE_TEAM_CODE = #{record.responsibleTeam,jdbcType=VARCHAR},
      </if>
      <if test="record.affirmDueDate != null">
        AFFIRM_DUE_DATE = #{record.affirmDueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.busTaxContact != null">
        BUS_TAX_CONTACT = #{record.busTaxContact,jdbcType=VARCHAR},
      </if>
      <if test="record.busControllerContact != null">
        BUS_CONTROLLER_CONTACT = #{record.busControllerContact,jdbcType=VARCHAR},
      </if>
      <if test="record.createTimestamp != null">
        CREATE_TIMESTAMP = #{record.createTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createUser != null">
        CREATE_USER = #{record.createUser,jdbcType=VARCHAR},
      </if>
      <if test="record.dealRequestTimestamp != null">
        DEAL_REQUEST_TIMESTAMP = #{record.dealRequestTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="record.lastUpdateTimestamp != null">
        LAST_UPDATE_TIMESTAMP = #{record.lastUpdateTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="record.lastUpdateUser != null">
        LAST_UPDATE_USER = #{record.lastUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="record.dealRationale != null">
        DEAL_RATIONALE = #{record.dealRationale,jdbcType=VARCHAR},
      </if>

      <if test="record.usdEquivalentAmount != null">
        USD_EQUIVALENT_AMOUNT = #{record.usdEquivalentAmount,jdbcType=VARCHAR},
      </if>
      <if test="record.mdmBusinessType != null">
        MDM_BUSINESS_TYPE = #{record.mdmBusinessType,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    update MYFUNDING.T_MYFUND_DEAL_REQUEST
    set DEAL_ID = #{record.dealId,jdbcType=DECIMAL},
      DEAL_DISPLAY = #{record.dealDisplay,jdbcType=VARCHAR},
      DEAL_NAME = #{record.dealName,jdbcType=VARCHAR},
      DEAL_STATUS_CODE = #{record.dealStatusCode,jdbcType=VARCHAR},
      DAY_TYPE = #{record.dayCode,jdbcType=VARCHAR},
      DEAL_REQUESTER = #{record.dealRequester,jdbcType=VARCHAR},
   
      DEAL_PRIORITY_CODE = #{record.dealPriority,jdbcType=VARCHAR},
      PRIORITY_COMMENT = #{record.priorityComment,jdbcType=VARCHAR},
      RESPONSIBLE_TEAM_CODE = #{record.responsibleTeam,jdbcType=VARCHAR},
      AFFIRM_DUE_DATE = #{record.affirmDueDate,jdbcType=TIMESTAMP},
      BUS_TAX_CONTACT = #{record.busTaxContact,jdbcType=VARCHAR},
      BUS_CONTROLLER_CONTACT = #{record.busControllerContact,jdbcType=VARCHAR},

      DEAL_REQUEST_TIMESTAMP = #{record.dealRequestTimestamp,jdbcType=TIMESTAMP},
      LAST_UPDATE_TIMESTAMP = #{record.lastUpdateTimestamp,jdbcType=TIMESTAMP},
      LAST_UPDATE_USER = #{record.lastUpdateUser,jdbcType=VARCHAR},
      DEAL_RATIONALE = #{record.dealRationale,jdbcType=VARCHAR},

      USD_EQUIVALENT_AMOUNT = #{record.usdEquivalentAmount,jdbcType=DECIMAL},
      MDM_BUSINESS_TYPE = #{record.mdmBusinessType,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    update MYFUNDING.T_MYFUND_DEAL_REQUEST
    <set>
<!--       <if test="dealDisplay != null">
        DEAL_DISPLAY = #{dealDisplay,jdbcType=VARCHAR},
      </if> -->
      <if test="dealName != null">
        DEAL_NAME = #{dealName,jdbcType=VARCHAR},
      </if>
      <if test="dealStatusCode != null">
        DEAL_STATUS_CODE = #{dealStatusCode,jdbcType=VARCHAR},
      </if>
      <if test="dayCode != null">
        DAY_TYPE = #{dayCode,jdbcType=VARCHAR},
      </if>
      <if test="dealRequester != null">
        DEAL_REQUESTER = #{dealRequester,jdbcType=VARCHAR},
      </if>
     
      <if test="dealPriority != null">
        DEAL_PRIORITY_CODE = #{dealPriority,jdbcType=VARCHAR},
      </if>
      <if test="priorityComment != null">
        PRIORITY_COMMENT = #{priorityComment,jdbcType=VARCHAR},
      </if>
      <if test="responsibleTeam != null">
        RESPONSIBLE_TEAM_CODE = #{responsibleTeam,jdbcType=VARCHAR},
      </if>
      <if test="affirmDueDate != null">
        AFFIRM_DUE_DATE = #{affirmDueDate,jdbcType=TIMESTAMP},
      </if>
      <if test="busTaxContact != null">
        BUS_TAX_CONTACT = #{busTaxContact,jdbcType=VARCHAR},
      </if>
      <if test="busControllerContact != null">
        BUS_CONTROLLER_CONTACT = #{busControllerContact,jdbcType=VARCHAR},
      </if>
<!--       removing this as it is a update query
      <if test="createTimestamp != null">
        CREATE_TIMESTAMP = #{createTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="createUser != null">
        CREATE_USER = #{createUser,jdbcType=VARCHAR},
      </if> -->
      <if test="dealRequestTimestamp != null">
        DEAL_REQUEST_TIMESTAMP = #{dealRequestTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateTimestamp != null">
        LAST_UPDATE_TIMESTAMP = #{lastUpdateTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateUser != null">
        LAST_UPDATE_USER = #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="dealRationale != null">
        DEAL_RATIONALE = #{dealRationale,jdbcType=VARCHAR},
      </if>

      <if test="usdEquivalentAmount != null">
        USD_EQUIVALENT_AMOUNT = #{usdEquivalentAmount,jdbcType=DECIMAL},
      </if>
      <if test="mdmBusinessType != null">
        MDM_BUSINESS_TYPE = #{mdmBusinessType,jdbcType=VARCHAR},
      </if>
    </set>
    where DEAL_ID = #{dealId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ge.treasury.myfunding.domain.myfunding.Deal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 25 12:44:07 EDT 2017.
    -->
    update MYFUNDING.T_MYFUND_DEAL_REQUEST
    set DEAL_DISPLAY = #{dealDisplay,jdbcType=VARCHAR},
      DEAL_NAME = #{dealName,jdbcType=VARCHAR},
      DEAL_STATUS_CODE = #{dealStatusCode,jdbcType=VARCHAR},
      DAY_TYPE = #{dayCode,jdbcType=VARCHAR},
      DEAL_REQUESTER = #{dealRequester,jdbcType=VARCHAR},
 
      DEAL_PRIORITY_CODE = #{dealPriority,jdbcType=VARCHAR},
      PRIORITY_COMMENT = #{priorityComment,jdbcType=VARCHAR},
      RESPONSIBLE_TEAM_CODE = #{responsibleTeam,jdbcType=VARCHAR},
      AFFIRM_DUE_DATE = #{affirmDueDate,jdbcType=TIMESTAMP},
      BUS_TAX_CONTACT = #{busTaxContact,jdbcType=VARCHAR},
      BUS_CONTROLLER_CONTACT = #{busControllerContact,jdbcType=VARCHAR},
      DEAL_REQUEST_TIMESTAMP = #{dealRequestTimestamp,jdbcType=TIMESTAMP},
      LAST_UPDATE_TIMESTAMP = #{lastUpdateTimestamp,jdbcType=TIMESTAMP},
      LAST_UPDATE_USER = #{lastUpdateUser,jdbcType=VARCHAR},
      DEAL_RATIONALE = #{dealRationale,jdbcType=VARCHAR},

      USD_EQUIVALENT_AMOUNT = #{usdEquivalentAmount,jdbcType=DECIMAL},
      MDM_BUSINESS_TYPE = #{mdmBusinessType,jdbcType=VARCHAR}
    where DEAL_ID = #{dealId,jdbcType=DECIMAL}
  </update>
    
  
  <select id="getDealDetailsById" parameterType="java.lang.Integer" resultMap="DealDetailsResultMap">
  
SELECT DISTINCT 

    DEAL.DEAL_ID,
	DEAL.DEAL_DISPLAY,
	DEAL.DEAL_NAME,
	DEAL.DEAL_STATUS_CODE,
	DEAL.DAY_TYPE,
	DEAL.DEAL_REQUESTER,
	DEAL.DEAL_PRIORITY_CODE,
	DEAL.PRIORITY_COMMENT,
	DEAL.RESPONSIBLE_TEAM_CODE,
	DEAL.AFFIRM_DUE_DATE,
	DEAL.BUS_TAX_CONTACT,
	DEAL.BUS_CONTROLLER_CONTACT,
	DEAL.CREATE_TIMESTAMP,
	DEAL.CREATE_USER,
	DEAL.DEAL_REQUEST_TIMESTAMP,
	DEAL.LAST_UPDATE_TIMESTAMP,
	DEAL.LAST_UPDATE_USER,
	DEAL.DEAL_RATIONALE, 
	
	DEAL.USD_EQUIVALENT_AMOUNT,
	DEAL.MDM_BUSINESS_TYPE,
	
	TRA.DEAL_TRANSACTION_ID DEAL_TRANSACTION_ID,
	TRA.DEAL_ID T_DEAL_ID, 
	TRA.TYPE_CODE T_TYPE_CODE, 
	TRA.SUB_TYPE_CODE T_SUB_TYPE_CODE, 
	TRA.AMOUNT T_AMOUNT, 
	TRA.FO_OWNER T_FO_OWNER, 
	TRA.MDM_CURRENCY_CODE T_MDM_CURRENCY_CODE, 
	TRA.IS_WSS_MANAGED T_IS_WSS_MANAGED, 
	TRA.EXECUTION_STATUS_CODE T_EXECUTION_STATUS_CODE, 
	TRA.IS_CROSS_BORDER T_IS_CROSS_BORDER, 
	TRA.IS_CASH_NONCASH T_IS_CASH_NONCASH, 
	TRA.IS_WITHHLD_TAX T_IS_WITHHLD_TAX, 
	TRA.WITHHLD_TAX_RATE T_WITHHLD_TAX_RATE, 
	TRA.LEGAL_AGREEMENT_CODE T_LEGAL_AGREEMENT_CODE, 
	TRA.LEGAL_AGREEMENT_COMMENT T_LEGAL_AGREEMENT_COMMENT, 
	TRA.DAY_TYPE T_DAY_TYPE, 
	TRA.FLOAT_RATE_IDX T_FLOAT_RATE_IDX, 
	TRA.FLOAT_RAT_IDX_TERM T_FLOAT_RAT_IDX_TERM, 
	TRA.SPREAD_BPS T_SPREAD_BPS, 
	TRA.IS_DISCONNECT T_IS_DISCONNECT, 
	TRA.CREATE_TIMESTAMP T_CREATE_TIMESTAMP, 
	TRA.CREATE_USER T_CREATE_USER, 
	TRA.LAST_UPDATE_TIMESTAMP T_LAST_UPDATE_TIMESTAMP, 
	TRA.LAST_UPDATE_USER T_LAST_UPDATE_USER,
	TRA.WSS_TRADE_ID,TRA.LOAN_START_DATE,TRA.MATURITY_DATE,TRA.LOAN_TERM,TRA.IS_IMMEDIATE_DRAWDOWN,TRA.IMMEDIATE_DRAWDOWN_AMT,TRA.COMMITMENT_FEE,
	TRA.GUARANTEE_FEE,TRA.IS_GUARANTEE_DOC,TRA.INTEREST_TYPE,TRA.EVENT_TYPE_CODE,TRA.USD_EQUIVALENT_AMOUNT T_USD_EQUIVALENT_AMOUNT,
	
	BUS.BUSINESS_ENTITY_ID BUS_BUSINESS_ENTITY_ID, 
	BUS.BUSINESS_ENTITY_CODE BUS_BUSINESS_ENTITY_CODE, 
	BUS.GOLD_LE BUS_GOLD_LE, 
	BUS.COMPANY_CODE BUS_COMPANY_CODE, 
	BUS.BUSINESS_UNIT BUS_BUSINESS_UNIT, 
	BUS.T_CODE BUS_T_CODE, 
	BUS.CURRENCY_CODE BUS_CURRENCY_CODE,
	BUS.CDR_CODE BUS_CDR_CODE, 
	BUS.IS_REGULATED BUS_IS_REGULATED, 
	BUS.NAME BUS_NAME, 
	BUS.COUNTRY BUS_COUNTRY, 
	BUS.BUSINESS_TYPE BUS_BUSINESS_TYPE, 
	BUS.DEAL_TRANSACTION_ID BUS_DEAL_TRANSACTION_ID, 
	BUS.CREATE_TIMESTAMP BUS_CREATE_TIMESTAMP, 
	BUS.CREATE_USER BUS_CREATE_USER, 
	BUS.LAST_UPDATE_TIMESTAMP BUS_LAST_UPDATE_TIMESTAMP, 
	BUS.LAST_UPDATE_USER BUS_LAST_UPDATE_USER,
	BUS.BUSINESS_SEGMENT BUS_BUSINESS_SEGMENT,
	BUS.STATUS BUS_STATUS,
	
	DOC.DOCUMENT_ID DO_DOCUMENT_ID,
	DOC.DOC_TYPE_CODE DO_DOC_TYPE_CODE, 
	DOC.FILE_ID DO_FILE_ID, 
	DOC.FOLDER_ID DO_FOLDER_ID, 
	DOC.DOC_URL DO_DOC_URL, 
	DOC.FILE_NAME DO_FILE_NAME, 
	DOC.DOC_COMMENT DO_DOC_COMMENT, 
	DOC.DEAL_ID DO_DEAL_ID, 
	DOC.DEAL_TRANSACTION_ID DO_DEAL_TRANSACTION_ID, 
	DOC.CREATE_TIMESTAMP DO_CREATE_TIMESTAMP, 
	DOC.CREATE_USER DO_CREATE_USER, 
	DOC.LAST_UPDATE_TIMESTAMP DO_LAST_UPDATE_TIMESTAMP, 
	DOC.LAST_UPDATE_USER DO_LAST_UPDATE_USER, 
	DOC.DOC_LEVEL DO_DOC_LEVEL,
	DOC.IS_ACTIVE DO_IS_ACTIVE,
	
	DTR.DOCUMENT_ID DTR_DOCUMENT_ID, 
	DTR.DOC_TYPE_CODE DTR_DOC_TYPE_CODE, 
	DTR.FILE_ID DTR_FILE_ID, 
	DTR.FOLDER_ID DTR_FOLDER_ID, 
	DTR.DOC_URL DTR_DOC_URL, 
	DTR.FILE_NAME DTR_FILE_NAME, 
	DTR.DOC_COMMENT DTR_DOC_COMMENT, 
	DTR.DEAL_ID DTR_DEAL_ID, 
	DTR.DEAL_TRANSACTION_ID DTR_DEAL_TRANSACTION_ID, 
	DTR.CREATE_TIMESTAMP DTR_CREATE_TIMESTAMP, 
	DTR.CREATE_USER DTR_CREATE_USER, 
	DTR.LAST_UPDATE_TIMESTAMP DTR_LAST_UPDATE_TIMESTAMP, 
	DTR.LAST_UPDATE_USER DTR_LAST_UPDATE_USER, 
	DTR.DOC_LEVEL DTR_DOC_LEVEL,
	DTR.IS_ACTIVE DTR_IS_ACTIVE,
	
	TEAM.DEAL_TEAM_ACTOR_ID TEAM_DEAL_TEAM_ACTOR_ID, 
	TEAM.DEAL_TEAM_ACTOR_CODE TEAM_DEAL_TEAM_ACTOR_CODE, 
	TEAM.OWNER TEAM_OWNER, 
	TEAM.COMMENTS TEAM_COMMENTS, 
	TEAM.NOTES TEAM_NOTES, 
	TEAM.ASSESSMENT TEAM_ASSESSMENT, 
	TEAM.RATIONALE TEAM_RATIONALE, 
	TEAM.TEAM_ACTOR_STATUS_CODE TEAM_TEAM_ACTOR_STATUS_CODE, 
	TEAM.DEAL_ID TEAM_DEAL_ID, 
	TEAM.CREATE_TIMESTAMP TEAM_CREATE_TIMESTAMP, 
	TEAM.CREATE_USER TEAM_CREATE_USER, 
	TEAM.LAST_UPDATE_TIMESTAMP TEAM_LAST_UPDATE_TIMESTAMP, 
	TEAM.LAST_UPDATE_USER TEAM_LAST_UPDATE_USER,
	TEAM.STATUS TEAM_STATUS
	
	
FROM MYFUNDING.T_MYFUND_DEAL_REQUEST DEAL
LEFT OUTER JOIN MYFUNDING.T_MYFUND_DEAL_TRANSACTION TRA ON (DEAL.DEAL_ID = TRA.DEAL_ID )
LEFT OUTER JOIN MYFUNDING.T_MYFUND_MDM_BUSINESS_ENTITY BUS ON TRA.DEAL_TRANSACTION_ID = BUS.DEAL_TRANSACTION_ID AND BUS.STATUS = 'ACTIVE'
LEFT OUTER JOIN MYFUNDING.T_MYFUND_DOCUMENT DOC ON (DEAL.DEAL_ID = DOC.DEAL_ID AND DOC.DOC_LEVEL='Deal' AND NVL(DOC.IS_ACTIVE,'Y') = 'Y')
LEFT OUTER JOIN MYFUNDING.T_MYFUND_DOCUMENT DTR ON (DEAL.DEAL_ID = DTR.DEAL_ID AND TRA.DEAL_TRANSACTION_ID = DTR.DEAL_TRANSACTION_ID AND DTR.DOC_LEVEL='Transaction' AND NVL(DTR.IS_ACTIVE,'Y') = 'Y')
LEFT OUTER JOIN MYFUNDING.T_MYFUND_DEAL_TEAM_ACTOR TEAM ON DEAL.DEAL_ID = TEAM.DEAL_ID  AND TEAM.STATUS = 'ACTIVE'
    where DEAL.DEAL_ID = #{dealId,jdbcType=DECIMAL} and DEAL.DEAL_STATUS_CODE != 'DEALSTATUS_CANCEL' 
    order by TRA.LAST_UPDATE_TIMESTAMP
  </select>
</mapper>